!function(){function simpleSprite($window){return{restrict:"AE",replace:!1,scope:{src:"@",frameWidth:"@",frameHeight:"@",frames:"@",framesPerRow:"@",repeat:"@",run:"@",speed:"@"},link:function($scope,element,attributes){function init(){src=$scope.src,frameWidth=parseInt($scope.frameWidth,10),frameHeight=parseInt($scope.frameHeight,10),frames=parseInt($scope.frames,10),repeat="true"==$scope.repeat,run="true"==$scope.run,speed=$scope.speed,framesPerRow=$scope.framesPerRow,element.css({display:"block",width:frameWidth+"px",height:frameHeight+"px",background:"url("+src+") repeat",backgroundPosition:"0px 0px"}),run&&animate()}function animate(){function isAnimationComplete(){var toReturn=!1;if(framesPerRow){var numRows=frames/framesPerRow;spritePosition.x>=(framesPerRow-1)*frameWidth&&spritePosition.y>=(numRows-1)*frameHeight&&(toReturn=!0)}else spritePosition.x>=frameWidth*frames&&(toReturn=!0);return toReturn}animationInterval=$window.setInterval(function(){element.css("background-position",-spritePosition.x+"px "+spritePosition.y+"px"),isAnimationComplete()?repeat?(spritePosition.x=0,spritePosition.y=0):$window.clearInterval(animationInterval):(spritePosition.x+=frameWidth,null!=framesPerRow&&spritePosition.x+frameWidth>frameWidth*framesPerRow&&(spritePosition.x=0,spritePosition.y+=frameHeight))},speed)}var src,frameWidth,frameHeight,frames,framesPerRow=0,repeat=!0,run=!0,speed=100,spritePosition={x:0,y:0},animationInterval=null;$scope.$on("$destroy",function(){$window.clearInterval(animationInterval)}),$scope.$watch(function(){return $scope.run},function(newValue,oldValue){!JSON.parse(oldValue)&&JSON.parse(newValue)&&(spritePosition.x=0,spritePosition.y=0,animate())}),init()}}}angular.module("simple-sprite",[]).directive("simpleSprite",simpleSprite),simpleSprite.$inject=["$window"]}(angular);